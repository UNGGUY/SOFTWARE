## 引言

### 产品描述
&nbsp;&nbsp;&nbsp;&nbsp;本产品为医疗网上自助报销系统，意在实现网上报销的功能。本项目将线下报销的大部分功能变为线上实现。解决异地报销困难，线下报销麻烦等问题。将报销过程变得更为方便、便捷。实现足不出户办理报销业务。

### 产品目标
- 实现大部分线下报销的功能，可以完成不同情况，不同需求的报销要求
- 系统简洁易于操作，尽量简化用户的操作，方便各个年龄段的用户使用
- 系统稳定性优秀，数据处理清晰、安全、容易维护
- 系统功能模块低耦合，可容易添加删除功能模块

### 全局说明

#### 词汇说明

- Python：是一种跨平台，高层次的结合了解释性、编译性、互动性和面向对象的脚本语言
- Django：是Python编程语言驱动的Web应用程序框架
- MVC：是模型(model)视图(view)控制器(controller)的缩写，是一种软件设计模式  
- MySql：是一个关系型数据库管理系统，由于其体积小、速度快、总体拥有成本低，开放源码的特点，一般中小型网站的开发都选择MySQL作为网站数据库。 
- API：应用程序接口，在本文中特指WebApi及网络接口
- ECS：ECS（Elastic Compute Service）是一种弹性可伸缩的计算服务
- PPS：Packets per Second及每秒发送多少个分组数据包
- IOPS：IOPS（Input/Output Operations Per Second）是一个用于计算机存储设备性能测试的量测方式，可以视为是每秒的读写次数
- MTBF：Mean Time Between Failure-平均故障间隔时间
- XSS：XSS攻击通常指的是通过利用网页开发时留下的漏洞，通过巧妙的方法注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序
- SqlInject：SQL注入即是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句,以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息

#### 交互说明
#### UI说明
#### 格式说明
#### 业务规则说明
#### 其他说明


## 系统定义
### 项目来源及背景
&nbsp;&nbsp;&nbsp;&nbsp;尽管医保卡在全国已非常普及，但采用公费医疗报销和医疗费二次报销的单位很多，对一些人员比较多的单位，如高等院校，人工保险的巨大工作量和报销排队等待时间太长，特别是离退休人员在异地，现场提交报销资料不便等成为医保管理信息化需要解决首要问题。
### 项目目标
#### 市场目标
- 可以解决异地报销，报销过程复杂以及报销需要排队等线下报销的问题
- 系统上线之后可以拥有一定的用户数量，并且可以拥有一定的用户口碑
- 系统在上线之后的一段时间可以形成一定的规模，并且的拥有与同类产品竞争的实力
#### 技术目标
- 系统各个功能模块之间分工明确，功能结构清晰，代码具有低耦合性
- 数据库设计实现数据结构化，数据之间具有联系，面向整个系统；数据共享性高，冗余度低，易扩充；数据独立性高
- 系统所使用资源合理，可以尽可能地充分利用空闲资源；系统稳定性高，安全性高；可以保护用户数据
### 系统结构
#### 系统框架
- 本系统将使用基于python的一款Web框架Django编写，Django是一款成熟的Web框架，使用MVC模型使项目具有低耦合、开发快捷、部署方便、可重用性高和维护成本低等
- 本系统将使用MySql作为数据库，MySql作为最流行的关系型数据库之一，有数据库体积小、速度快、总体拥有成本低、开放源代码，适合中小型网站的开发
#### 主要功能
- 报销场景，对于不同种类的报销场景，提供不同的报销功能
  > 用户拥有不同的报销比例，在职人员，退休人员，离休人员等  
  > 用户是否是在指定医院就医，是否拥有转院手续  
  > 用户所使用不同药物能否报销及报销比例
- 用户报销资料管理，并且对于所有报销资料进行分类管理
  >管理用户就医发票  
  >管理用户药物发票  
  >管理用户转院所用到的转诊单
- 报销流程业务，为不同的后台人员提供不同阶段的业务功能
  >审核员对报销凭证审核，形成审核结果  
  >收单人员对报销单查验，确认收单成功
#### 系统预留接口 

- 用户验证接口：预留给第三方程序的用户登录API
- 用户提交报销资料接口：预留给第三方程序提交报销资料API
- 用户报销进度查看接口：预留给第三方程序获得报销资料API
- 各类数据获得接口：预留给第三方数据分析程序获得用户各类统计数据，及总体统计数据API


### 各组成部分
- 用户功能部分
  - 用户登录功能：用户可以通过手机号或者邮箱登录系统，来获得更多的服务  
  - 用户信息完善功能：用户可以添加自己的基本信息并且可以更改如自己的手机号及邮箱
  - 用户医疗报销功能：用户可以通过上传自己的报销资料来实现线上报销
  - 用户报销进度查询功能：用户可以查看自己所申报的报销业务进度
  - 用户报销审核结果确认功能：用户可以查看自己的审核结果，并对审核结果进行确认
  - 用户报销资料补充更改功能：对于存在问题的报销凭证及存在问题的审核结果，用户可以通过重新上传资料来对原来的资料进行补充更改
  - 用户报销历史查询功能：用户可以查看自己过去的报销历史及报销时所提交的材料

- 报销业务功能部分
  - 业务人员登录功能：业务人员可以通过用户名和密码登录系统
  - 审核员审核功能：审核员可以审核用户提交的不同报销材料，按规定审核报销材料是否正确、准确，扣减不能报销部分，形成审核结果
  - 收单员收单功能：收单员根据用户报销材料及审核员审核结果对报销单进行确认

- 后台管理功能部分
  - 管理员登录功能：管理员可以通过账号密码登录后台管理系统
  - 部门管理功能
    > 部门目录: 可以查看部门表中所有部门的信息  
    > 添加部门: 向部门表中添加一个新的部门  
    > 修改部门: 修改部门表中部门的某些属性  
    > 删除部门：将部门表中部门状态属性一栏修改为删除状态  
  - 用户管理功能
    > 添加用户: 添加用户到用户表中  
    > 查找修改用户信息: 修改用户表中用户的部分属性  
    > 删除用户: 将用户表中用户状态一栏修改为删除状态  
    > 用户批量导入: 可以通过excel、json、xml等文件向数据库中批量添加用户
  - 用户报销记录查询功能
  - 审核管理功能：如审核结果有问题，就要撤销审核，由审核员重新审核，这里有审核查询和审核撤销
  - 用户报销统计功能：人员统计，性别、年龄、时间段
报销汇总分析：按类别、学院、专业、性别、地域、年龄、年级、医事服务费、自费、特殊扣减，就医科室等，
  - 审核结果统计功能：审核人审核数，差错数，差错率  
  - 报销记录归档：归档记录只能通过后台查询，用户记录中不显示
    > 已报销记录归档  
    > 已审核记录超过一定时间归档  
    > 未提交记录归档（3个月，指定月份）  
  - 数据备份：按周自动备份报销记录、凭证


## 应用环境
### 系统硬件环境
>阿里云服务器ECS 规格组-ecs.g6e.large 费用-2896.80/年
> - CPU: intel Xeon Platinum 8269CY 2vCPU
> - 内存: 8GiB
> - 本地存储: 40GiB
> - 网络带宽能力（出/入）: 突发最高10.0GiB
> - 网络收发包能力（出+入）: 90万PPS
> - 支持ipv6： 是
> - 连接数： 最高25万
> - 多队列： 2
> - 弹性网卡（包括一块主网卡）：3
> - 单块弹性网卡的私有ip ： 6
> - 云盘IOPS： 2.0万
> - 云盘带宽： 1.0Gbit/s
> - 操作系统： ubuntu20.04 64位
### 系统软件环境
**ubuntu 20.04** 
### 系统网络环境
**网络环境由阿里经行保障**
### 用户操作模式
### 当前应用环境
#### 网络环境
#### 硬件环境
#### 软件环境
#### 外部系统环境

## 功能规格
### 功能编号

|功能编号|功能||功能编号|功能| 
|:-------|:----|:-|:------|:----|
|**用户功能**|
|U-01|用户登录||U-02|用户信息完善|
|U-03|用户报销服务||U-04|用户报销进度查询|
|U-05|报销审核结果确认||U-06|报销材料补充更改|
|U-07|用户报销历史查询|
|**业务功能**|
|S-01|业务人员登录||S-02|审核功能|
|S-03|收单功能|
|**后台功能**|
|A-01|管理员登录||A-02|部门目录|
|A-03|添加部门||A-04|修改部门|
|A-05|删除部门||A-06|添加用户|
|A-07|修改用户||A-08|删除用户|
|A-09|批量导入用户||A-10|报销记录查询|
|A-011|审核管理功能||A-12|用户报销统计|
|A-013|审核结果统计||A-14|报销数据归档|
|A-015|数据备份|

### 优先级
- 面向用户的功能均为最高级
- 面向业务的功能均为最高级
- 后台管理程序中对数据数据库修改的功能为最高级其他功能次之

### 功能定义
### 功能描述


## 性能需求
### 响应时间需求
系统响应时间因该迅速，当用户向服务器提交一个请求时，响应时间应该达到所使用服务器的平均水平
### 可靠性需求
***系统应保证7×24小时不间断运行，系统硬件构成应具有冗余等安全措施。设备的MTBF应小于或等于每年50分钟内。设备具有避免单点失效的功能，从而保证系统的可靠度不低于99.99%***
- 系统能够避免单点失效，即某台设备宕机不会影响到整个业务的运行
- 系统实现阵列级RAID备份
- 系统提供关键部件的冗余能力
- 系统设计寿命应大于10年
- 系统的硬件与软件相互配合，提供对系统故障的管理能力
- 系统要求可靠、稳定，平均故障时间间隔应不低于5000h，故障平均修复时间不高于1h。硬件设备应有较高的可靠性和容错能力
- 关键部件在故障情况下，支持主备倒换
- 采集设备支持在线扩容
### 可移植性
- 系统可以在不同硬件条件的服务器上运行
- 系统可以在不同的操作系统上运行
- 相互可以容易被其他人员接管
### 安全性需求
- 服务器中数据不会轻易损坏，不会被他人篡改
- 服务器可以承受一定规模的网络攻击而不会宕机
- 系统自身具有较高的安全性，可以预防XSS、SqlInject等攻击
### 资源利用需求

## 产品提交
- 本系统户被直接部署到服务器上，提交产品时设置后台管理员
- 本系统提交时间为2020年11月底
- 本系统的维护由需求方决定，可以有项目组维护也可以自行找相关技术人员维护